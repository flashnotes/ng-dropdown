angular.module("ng-dropdown",[]).factory("DropdownService",function(){return{menuElement:null}}).directive("dropdown",["$document","$parse","DropdownService",function(e,n,o){return{restrict:"A",scope:{},link:function(n,t,d){function u(e){n.$apply(function(){e.addClass(c),n.opened=!0})}function p(e){n.$apply(function(){e.removeClass(c),n.opened=!1})}function r(e){n.opened?p(e):u(e)}{var i,l=n.$eval(d.dropdownDisabled),c=d.dropdownOpenClass||"open";d.dropdownOptionClass||"ng-dropdown-option"}n.opened=!1,t.bind("click",function(e){l||(i=angular.element(document.getElementById(d.dropdownMenu)),o.menuElement&&o.menuElement.attr("id")!==i.attr("id")&&p(o.menuElement),o.menuElement=i,e.preventDefault(),e.stopPropagation(),r(o.menuElement))}),e.bind("keyup",function(e){!l&&n.opened&&(27===e.keyCode?p(o.menuElement):40===e.keyCode||38===e.keyCode||13===e.keyCode)}),e.bind("click",function(){n.opened&&event.target!==i&&p(o.menuElement)})}}}]);