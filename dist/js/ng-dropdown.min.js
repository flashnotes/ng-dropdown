angular.module("ng-dropdown",[]).factory("DropdownService",function(){return{element:null,menuElement:null}}).directive("dropdown",["$document","$parse","DropdownService",function(e,n,o){return{restrict:"A",scope:{opened:"@"},link:function(n,t,d){function l(){n.$apply(function(){o.menuElement.addClass(a),o.element.addClass(c),n.opened=!0})}function i(){n.$apply(function(){o.menuElement.removeClass(a),o.element.removeClass(c),n.opened=!1})}function p(){n.opened?i():l()}var r,u=n.$eval(d.dropdownDisabled),a=d.dropdownOpenClass||"open",c=(d.dropdownOptionClass||"option",d.dropdownActiveClass||"active");n.opened=!1,t.bind("click",function(e){u||(r=angular.element(document.getElementById(d.dropdownMenu)),o.menuElement&&o.menuElement.attr("id")!==r.attr("id")&&i(),o.menuElement=r,o.element=t,e.preventDefault(),e.stopPropagation(),p())}),e.bind("keyup",function(e){!u&&n.opened&&(27===e.keyCode?i():40===e.keyCode||38===e.keyCode||13===e.keyCode)}),e.bind("click",function(){n.opened&&event.target!==r&&i()})}}}]);